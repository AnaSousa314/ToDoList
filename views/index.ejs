<!DOCTYPE html>
<html>
  <head>
    <title>To Do List</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <link rel='stylesheet' href='/stylesheets/style.css' />

<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

<script src="../javascripts/script.js"></script>

  </head>
  <body>
    <h1>To Do List</h1>

    <form action="/create" method="post">
      <div class="row">
        <div class="col">
          <label for="task">Atividade</label>
          <textarea
          class="form-control" name="task" id="task" cols="30" rows="10"
          placeholder="Digite a atividade"></textarea>
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Enviar</button>
    </form>

    <table class="table">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Atividade</th>
          <th scope="col" colspan="2">Ações</th>
        </tr>
      </thead>
      <tbody>
        <% activities.forEach(activity=> {%>
          <tr>
            <th scope="row"><%= activity.id %></th>
            <td> <%= activity.task %>  </td>
            <td> <a href="/edit/<%= activity.id %> " class="task">Editar</a> 

            </td>
            <td>
              <a href="#" data-bs-toggle="modal" data-bs-target="#modal-<%= activity.id %>">Excluir</a>
            </td>
          </tr>

           <!-- Modal -->
          <div class="modal" tabindex="-1" id="modal-<%= activity.id %>">
            <div class="modal-dialog ">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Excluir</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <p>Deseja mesmo excluir a atividade <b>"<%= activity.task %>"</b>? </p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>

                  <a href="/delete/<%= activity.id %> "
                  <button type="button" class="btn btn-danger">Excluir</button>
                  </a>
                </div>
              </div>
            </div>
          </div>
        <% }) %> 
      </tbody>
    </table>
  </body>
</html>
